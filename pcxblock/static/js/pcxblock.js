function PCXBlock(runtime, element) {

    //console.log("lol");

    function get_student_picture(){
        //var canvas = $('.designer canvas').get(0);
        var dataURL = 'data:image/png;base64,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';//canvas.toDataURL();
        return dataURL;
    }

    /*function success_func(result) {
        //console.log("Количество баллов: " + result.correct/result.weight*100 + " ОТВЕТОВ: " + result.attempts);
        $('.attempts', element).text(result.attempts);
        $(element).find('.weight').html('Набрано баллов: <me-span class="points"></span>');
        $('.points', element).text(result.correct + ' из ' + result.weight);

        if (result.max_attempts && result.max_attempts <= result.attempts) {
            $('.send_button', element).html('<p><strong>Попытки исчерпаны</strong></p>')
        };
    };*/


    /*function success_save(result){
        var span = document.createElement('span');
        span.innerHTML = 'Сохранено';
        span.classList.add('saved');
        element.getElementsByClassName('action')[0].appendChild(span);
        setTimeout(function(){element.getElementsByClassName('saved')[0].parentNode.removeChild(element.getElementsByClassName('saved')[0])}, 1000);        
    };*/

    /*function success_check(result){
        console.log("success_check");*/
       /* $.ajax({
            type: "POST",
            url: handlerUrl,
            data: '',
            success: success_func
        });    */
    /*};*/

    var handlerUrl = runtime.handlerUrl(element, 'student_submit');

    $(element).find('.Check').bind('click', function() {
       var student_picture = get_student_picture();
       console.log("get_student_picture: " + student_picture);
        
        $.ajax({
            type: "POST",
            url: handlerUrl,
            data: JSON.stringify({picture: student_picture }),
            //success: success_check
        });

    });

}